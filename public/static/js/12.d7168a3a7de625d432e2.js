webpackJsonp([12],{"+LKs":function(t,a){},lFBW:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("BUOS"),s={name:"user-home",data:function(){return{photoData:"",canupload:!1,canvas:null,ctx:null,mediaStreamTrack:null}},methods:{navClick:function(t){this.$router.push(t)},getMedia:function(){var t=this,a=this.$refs["camera-video"];navigator.mediaDevices.getUserMedia({video:{width:400,height:400},audio:!1}).then(function(e){t.mediaStreamTrack=e,a.srcObject=e,a.play()})},takePhoto:function(){var t=this.$refs["camera-video"];this.canvas=this.$refs["camera-canvas"],this.ctx=this.canvas.getContext("2d"),this.ctx.drawImage(t,0,0,200,200)},getImgdata:function(){return this.canvas.toDataURL("image/jpeg")},removePhoto:function(){this.ctx.clearRect(0,0,200,200),this.ctx=null},uploadImg:function(){var t=this;if(this.ctx){var a=this.getImgdata();Object(i.i)({data:a}).then(function(a){t.$router.push("/userapplication")})}else this.$message("请拍照上传")}},mounted:function(){this.getMedia()},destroyed:function(){this.mediaStreamTrack.getTracks().forEach(function(t){t.stop()})}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"msg-wp-img"},[e("video",{ref:"camera-video",staticClass:"video-msg border-rad",attrs:{width:"200",height:"200",autoplay:"autoplay"}}),t._v(" "),e("img",{attrs:{src:"/static/img/arrow.png"}}),t._v(" "),e("canvas",{ref:"camera-canvas",staticClass:"canvas-msg border-rad",attrs:{width:"200px",height:"200px"}})]),t._v(" "),e("el-row",{staticClass:"upload-btn",attrs:{type:"flex",justify:"space-between"}},[e("el-col",{attrs:{span:4}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-picture"},on:{click:t.takePhoto}})],1),t._v(" "),e("el-col",{attrs:{span:4}},[e("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.removePhoto}})],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:t.uploadImg}})],1)],1)],1)},staticRenderFns:[]};var r=e("/4AN")(s,n,!1,function(t){e("+LKs")},null,null);a.default=r.exports}});
//# sourceMappingURL=12.d7168a3a7de625d432e2.js.map