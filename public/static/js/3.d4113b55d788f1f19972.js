webpackJsonp([3],{"48jT":function(t,e,n){"use strict";e.a=function(t){return i.a.post("/api/back/addbook",t)},e.b=function(){return i.a.get("/api/back/booklist")},e.c=function(t){return i.a.put("/api/back/updatebook",t)},e.e=function(t){return console.log(t),i.a.delete("/api/back/removebook",{params:{id:t}})},e.d=function(t){return i.a.get("/api/back/getbook",{params:{_id:t}})};var a=n("dZBD"),i=n.n(a)},"8FtN":function(t,e,n){t.exports={default:n("eOjq"),__esModule:!0}},"P+rg":function(t,e,n){n("wbaH"),t.exports=n("zKeE").Object.values},PDcB:function(t,e,n){var a=n("mbLO"),i=n("knrM");n("cOHw")("keys",function(){return function(t){return i(a(t))}})},Qujq:function(t,e,n){t.exports={default:n("P+rg"),__esModule:!0}},cOHw:function(t,e,n){var a=n("vSO4"),i=n("zKeE"),s=n("wLcK");t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],o={};o[t]=e(n),a(a.S+a.F*s(function(){n(1)}),"Object",o)}},"d/AR":function(t,e,n){var a=n("knrM"),i=n("Wyka"),s=n("z7R8").f;t.exports=function(t){return function(e){for(var n,o=i(e),c=a(o),r=c.length,l=0,u=[];r>l;)s.call(o,n=c[l++])&&u.push(t?[n,o[n]]:o[n]);return u}}},eOjq:function(t,e,n){n("PDcB"),t.exports=n("zKeE").Object.keys},maGK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Qujq"),i=n.n(a),s=n("8FtN"),o=n.n(s),c=n("48jT"),r={name:"booklist",data:function(){return{dataSet:[],clickCenter:!1,dialogVisible:!1,fileList:[]}},mounted:function(){this.initData()},methods:{initData:function(){var t=this;Object(c.b)().then(function(e){for(var n,a,s=(n=e.data,a={},n.forEach(function(t){t.key&&(a[t.key]?a[t.key].push(t):a[t.key]=[t])}),a),c=o()(s),r=i()(s),l=[],u=0;u<c.length;u++)l.push({key:c[u],search:"",datas:r[u]});t.dataSet=l})},handlerData:function(t){for(var e=0;e<this.dataSet.length;e++){var n=-1;if(this.dataSet[e].datas&&-1!==(n=this.dataSet[e].datas.findIndex(function(e){return e._id===t}))){n=this.dataSet[e].datas.findIndex(function(e){return e._id===t}),this.dataSet[e].datas.splice(n,1);break}}},handleEdit:function(t,e,n){this.$router.push("/editor/"+e._id)},handleDelete:function(t,e){var n=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(c.e)(e._id).then(function(t){t.data&&"success"===t.data.deleting&&(n.$message({type:"success",message:"删除成功!"}),n.handlerData(e._id))})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},toggleCenterHandle:function(){this.clickCenter=!this.clickCenter},clickAdd:function(){this.$router.push("/addbook")},uploadAdd:function(){this.dialogVisible=!0},handleChange:function(t,e){console.log(t),this.fileList=e.slice(-3)}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticClass:"box-list-wrapper",attrs:{gutter:50,type:"flex",justify:"center"}},t._l(t.dataSet,function(e,a){return n("el-col",{key:a,attrs:{span:10}},[n("el-card",{staticClass:"box-item"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(e.key))])]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.datas.filter(function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}),height:"249"}},[n("el-table-column",{attrs:{prop:"key",label:"关键词"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(a){return[n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(n){t.$set(e,"search",n)},expression:"item.search"}})]}},{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleEdit(e.$index,e.row,n)}}},[n("i",{staticClass:"el-icon-edit"})]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[n("i",{staticClass:"el-icon-delete"})])]}}],null,!0)})],1)],1)],1)}),1),t._v(" "),n("div",{staticClass:"fixed-menu"},[n("div",{staticClass:"center",class:{rotate:t.clickCenter},on:{click:t.toggleCenterHandle}},[n("img",{staticClass:"item-menu left-menu",attrs:{src:"/static/img/add_one.png"},on:{click:function(e){return e.stopPropagation(),t.clickAdd(e)}}}),t._v(" "),n("img",{staticClass:"item-menu right-menu",attrs:{src:"/static/img/upload.png"},on:{click:function(e){return e.stopPropagation(),t.uploadAdd(e)}}})])]),t._v(" "),n("el-dialog",{attrs:{title:"文件上传",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("span",[t._v("文件上传格式必须为JSON文件")]),t._v(" "),n("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/upload","on-change":t.handleChange,accept:".json","file-list":t.fileList}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1)},staticRenderFns:[]};var u=n("/4AN")(r,l,!1,function(t){n("quCa")},null,null);e.default=u.exports},quCa:function(t,e){},wbaH:function(t,e,n){var a=n("vSO4"),i=n("d/AR")(!1);a(a.S,"Object",{values:function(t){return i(t)}})}});
//# sourceMappingURL=3.d4113b55d788f1f19972.js.map